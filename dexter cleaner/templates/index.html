<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEXTER PC Optimizer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-content">
            <div class="logo-container">
                <i class="fas fa-cog fa-spin logo-icon"></i>
                <h1 class="logo-text">DEXTER</h1>
                <p class="logo-subtitle">PC Optimizer</p>
            </div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="main-app d-none">
        <!-- Custom Title Bar -->
        <div class="title-bar">
            <div class="title-content">
                <div class="title-left">
                    <i class="fas fa-cog title-icon"></i>
                    <span class="title-text">DEXTER PC Optimizer</span>
                    <span class="version-badge">v2.0</span>
                </div>
                <div class="title-right">
                    <button id="about-btn" class="about-btn" title="About DexterOptiClean">
                        <i class="fas fa-info-circle"></i>
                        <span>About</span>
                    </button>
                    <button id="admin-btn" class="admin-btn" title="Request Admin Privileges">
                        <i class="fas fa-shield-alt"></i>
                        <span>Run as Admin</span>
                    </button>
                    <div class="window-controls">
                        <button class="control-btn minimize-btn"><i class="fas fa-minus"></i></button>
                        <button class="control-btn maximize-btn"><i class="fas fa-square"></i></button>
                        <button class="control-btn close-btn"><i class="fas fa-times"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid main-container">
            <div class="row h-100">
                <!-- Left Sidebar - System Dashboard -->
                <div class="col-md-3 sidebar">
                    <div class="dashboard-card">
                        <h5 class="dashboard-title">
                            <i class="fas fa-chart-pie"></i>
                            System Dashboard
                        </h5>
                        
                        <!-- Storage Visualization -->
                        <div class="storage-section">
                            <h6>Storage Overview</h6>
                            <div class="storage-bar-container">
                                <div class="storage-label">Current Free Space</div>
                                <div class="storage-bar">
                                    <div id="free-space-bar" class="storage-progress"></div>
                                    <span id="free-space-text" class="storage-text">0 GB Free</span>
                                </div>
                            </div>
                            <div class="storage-bar-container">
                                <div class="storage-label">Space After Cleaning</div>
                                <div class="storage-bar">
                                    <div id="recovery-bar" class="storage-progress recovery"></div>
                                    <span id="recovery-text" class="storage-text">+0 GB Recoverable</span>
                                </div>
                            </div>
                        </div>

                        <!-- Real-Time Monitoring -->
                        <div class="monitoring-section">
                            <h6>System Performance</h6>
                            <div class="row">
                                <div class="col-6">
                                    <div class="gauge-container">
                                        <div class="circular-gauge" id="cpu-gauge">
                                            <div class="gauge-inner">
                                                <span class="gauge-value" id="cpu-value">0%</span>
                                                <span class="gauge-label">CPU</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="gauge-container">
                                        <div class="circular-gauge" id="ram-gauge">
                                            <div class="gauge-inner">
                                                <span class="gauge-value" id="ram-value">0%</span>
                                                <span class="gauge-label">RAM</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Admin Status -->
                        <div class="admin-status">
                            <div class="status-indicator">
                                <i id="admin-icon" class="fas fa-shield-alt"></i>
                                <span id="admin-status-text">Checking privileges...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Content Area -->
                <div class="col-md-9 main-content">
                    <!-- Navigation Tabs -->
                    <div class="navigation-tabs">
                        <button class="nav-tab active" data-tab="basic">
                            <i class="fas fa-broom"></i>
                            Basic
                        </button>
                        <button class="nav-tab" data-tab="advanced">
                            <i class="fas fa-cogs"></i>
                            Advanced
                        </button>
                        <button class="nav-tab" data-tab="browser">
                            <i class="fas fa-globe"></i>
                            Browser
                        </button>
                        <button class="nav-tab" data-tab="gaming">
                            <i class="fas fa-gamepad"></i>
                            Gaming
                        </button>
                        <button class="nav-tab" data-tab="duplicates">
                            <i class="fas fa-copy"></i>
                            Duplicates
                        </button>
                        <button class="nav-tab" data-tab="settings">
                            <i class="fas fa-cog"></i>
                            Settings
                        </button>
                    </div>

                    <!-- Tab Content -->
                    <div class="tab-content">
                        <!-- Basic Cleaning Tab -->
                        <div id="basic-tab" class="tab-pane active">
                            <div class="content-header">
                                <h3>Basic System Cleanup</h3>
                                <p>Clean temporary files, recycle bin, and system cache</p>
                            </div>
                            
                            <!-- Cleaning Categories Display -->
                            <div class="cleaning-categories">
                                <h4>BASIC CLEANING <span class="select-all-btn">Select All</span></h4>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="temp-files" checked>
                                    <label for="temp-files">üóëÔ∏è Temp Files</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="temp-folder" checked>
                                    <label for="temp-folder">üìÅ %TEMP% Folder</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="browser-cache" checked>
                                    <label for="browser-cache">üåê Browser Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="downloads-folder" checked>
                                    <label for="downloads-folder">üì• Downloads Folder</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="dns-cache" checked>
                                    <label for="dns-cache">üåç Flush DNS Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="clipboard" checked>
                                    <label for="clipboard">üìã Clear Clipboard</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="recent-docs" checked>
                                    <label for="recent-docs">üìÑ Recent Documents</label>
                                </div>
                            </div>
                            <div class="scan-section">
                                <button id="clean-all-btn" class="scan-button">
                                    <i class="fas fa-broom"></i>
                                    <span>Clean All Categories</span>
                                    <div class="button-glow"></div>
                                </button>
                                <div id="scan-progress" class="scan-progress d-none">
                                    <div class="progress-bar">
                                        <div id="progress-fill" class="progress-fill"></div>
                                    </div>
                                    <div id="progress-text" class="progress-text">Scanning... 0%</div>
                                </div>
                            </div>
                        </div>

                        <!-- Advanced Cleaning Tab -->
                        <div id="advanced-tab" class="tab-pane">
                            <div class="content-header">
                                <h3>Advanced System Cleanup</h3>
                                <p>Clean system logs, caches, and other advanced areas</p>
                            </div>
                            
                            <!-- Advanced Cleaning Categories -->
                            <div class="cleaning-categories">
                                <h4>ADVANCED CLEANING <span class="select-all-btn">Select All</span></h4>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="directx-cache" checked>
                                    <label for="directx-cache">üéÆ DirectX Shader Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="nvidia-cache" checked>
                                    <label for="nvidia-cache">üñ•Ô∏è NVIDIA GPU Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="thumbnail-cache" checked>
                                    <label for="thumbnail-cache">üñºÔ∏è Thumbnail Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="windows-logs" checked>
                                    <label for="windows-logs">üìù Windows Log Files</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="crash-dumps" checked>
                                    <label for="crash-dumps">üí• Crash Dump Files</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="windows-defender" checked>
                                    <label for="windows-defender">üõ°Ô∏è Windows Defender Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="java-cache" checked>
                                    <label for="java-cache">‚òï Java Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="onedrive-cache" checked>
                                    <label for="onedrive-cache">‚òÅÔ∏è OneDrive Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="event-logs" checked>
                                    <label for="event-logs">üìä Event Logs</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="font-cache" checked>
                                    <label for="font-cache">üî§ Font Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="store-cache" checked>
                                    <label for="store-cache">üè™ Microsoft Store Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="update-cache" checked>
                                    <label for="update-cache">üîÑ Windows Update Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="icon-cache" checked>
                                    <label for="icon-cache">üìå Icon Cache</label>
                                </div>
                            </div>
                            <div class="scan-section">
                                <button id="clean-advanced-btn" class="scan-button">
                                    <i class="fas fa-broom"></i>
                                    <span>Clean Selected Items</span>
                                    <div class="button-glow"></div>
                                </button>
                            </div>
                        </div>

                        <!-- Browser Cleaning Tab -->
                        <div id="browser-tab" class="tab-pane">
                            <div class="content-header">
                                <h3>Browser Cleanup</h3>
                                <p>Clean browser history, cookies, and cache</p>
                            </div>
                            
                            <!-- Browser Cleaning Categories -->
                            <div class="cleaning-categories">
                                <h4>BROWSER CLEANING <span class="select-all-btn">Select All</span></h4>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="browser-history" checked>
                                    <label for="browser-history">üïí Browser History</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="browser-cookies" checked>
                                    <label for="browser-cookies">üç™ Browser Cookies</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="saved-passwords">
                                    <label for="saved-passwords">üîë Saved Passwords</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="autofill-data" checked>
                                    <label for="autofill-data">üìù Autofill Data</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="session-data" checked>
                                    <label for="session-data">üìå Session Data</label>
                                </div>
                                
                                <h5>BROWSER-SPECIFIC</h5>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="chrome-cookies" checked>
                                    <label for="chrome-cookies">Chrome Cookies</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="firefox-cookies" checked>
                                    <label for="firefox-cookies">Firefox Cookies</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="edge-cookies" checked>
                                    <label for="edge-cookies">Edge Cookies</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="opera-cookies" checked>
                                    <label for="opera-cookies">Opera Cookies</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="brave-cookies" checked>
                                    <label for="brave-cookies">Brave Cookies</label>
                                </div>
                            </div>
                            <div class="scan-section">
                                <button id="clean-browser-btn" class="scan-button">
                                    <i class="fas fa-broom"></i>
                                    <span>Clean Browser Data</span>
                                    <div class="button-glow"></div>
                                </button>
                            </div>
                        </div>

                        <!-- Gaming Cleaning Tab -->
                        <div id="gaming-tab" class="tab-pane">
                            <div class="content-header">
                                <h3>Gaming & Applications</h3>
                                <p>Clean gaming platform caches and application temporary files</p>
                            </div>
                            
                            <!-- Gaming Cleaning Categories -->
                            <div class="cleaning-categories">
                                <h4>GAMING & APPS <span class="select-all-btn">Select All</span></h4>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="steam-cache" checked>
                                    <label for="steam-cache">üéÆ Steam Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="epic-games-cache" checked>
                                    <label for="epic-games-cache">üéØ Epic Games Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="origin-cache" checked>
                                    <label for="origin-cache">üé≤ Origin Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="adobe-cache" checked>
                                    <label for="adobe-cache">üé® Adobe Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="spotify-cache" checked>
                                    <label for="spotify-cache">üéµ Spotify Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="discord-cache" checked>
                                    <label for="discord-cache">üí¨ Discord Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="teams-cache" checked>
                                    <label for="teams-cache">üë• Microsoft Teams Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="vscode-cache" checked>
                                    <label for="vscode-cache">üíª VS Code Cache</label>
                                </div>
                                <div class="cleaning-item">
                                    <input type="checkbox" id="npm-cache" checked>
                                    <label for="npm-cache">üì¶ NPM Cache</label>
                                </div>
                            </div>
                            <div class="scan-section">
                                <button id="clean-gaming-btn" class="scan-button">
                                    <i class="fas fa-broom"></i>
                                    <span>Clean Gaming & App Data</span>
                                    <div class="button-glow"></div>
                                </button>
                            </div>
                        </div>

                        <!-- Duplicate Files Tab -->
                        <div id="duplicates-tab" class="tab-pane">
                            <div class="content-header">
                                <h3>Duplicate File Finder</h3>
                                <p>Find and remove duplicate files to free up space</p>
                            </div>
                            
                            <div class="duplicate-finder">
                                <div class="directory-selector">
                                    <label for="directory-input">Select Directory to Scan:</label>
                                    <div class="input-group">
                                        <input type="text" id="directory-input" class="form-control" placeholder="C:\Users\YourName\Documents">
                                        <button id="browse-btn" class="btn btn-outline-secondary">Browse</button>
                                    </div>
                                </div>
                                
                                <div class="scan-options">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="scan-images" checked>
                                        <label class="form-check-label" for="scan-images">Images (JPG, PNG, etc.)</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="scan-documents" checked>
                                        <label class="form-check-label" for="scan-documents">Documents (PDF, DOC, etc.)</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="scan-media" checked>
                                        <label class="form-check-label" for="scan-media">Media (MP3, MP4, etc.)</label>
                                    </div>
                                </div>
                                
                                <div class="scan-section">
                                    <button id="find-duplicates-btn" class="scan-button">
                                        <i class="fas fa-search"></i>
                                        <span>Find Duplicate Files</span>
                                        <div class="button-glow"></div>
                                    </button>
                                </div>
                                
                                <div id="duplicate-results" class="duplicate-results d-none">
                                    <h4>Duplicate Files Found</h4>
                                    <div class="results-summary">
                                        <div class="summary-item">
                                            <span class="summary-label">Groups:</span>
                                            <span id="duplicate-groups" class="summary-value">0</span>
                                        </div>
                                        <div class="summary-item">
                                            <span class="summary-label">Files:</span>
                                            <span id="duplicate-files" class="summary-value">0</span>
                                        </div>
                                        <div class="summary-item">
                                            <span class="summary-label">Potential Savings:</span>
                                            <span id="potential-savings" class="summary-value">0 MB</span>
                                        </div>
                                    </div>
                                    
                                    <div id="duplicate-list" class="duplicate-list">
                                        <!-- Duplicate groups will be displayed here -->
                                    </div>
                                    
                                    <div class="duplicate-actions">
                                        <button id="select-all-duplicates" class="btn btn-outline-primary">Select All</button>
                                        <button id="remove-selected" class="btn btn-danger">Remove Selected</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Settings Tab -->
                        <div id="settings-tab" class="tab-pane">
                            <div class="content-header">
                                <h3>Settings</h3>
                                <p>Configure application preferences and options</p>
                            </div>
                            
                            <div class="settings-container">
                                <div class="settings-section">
                                    <h4>Appearance</h4>
                                    <div class="setting-item">
                                        <div class="setting-label">Theme</div>
                                        <div class="theme-selector">
                                            <div id="theme-dark" class="theme-option theme-dark active" title="Dark Theme"></div>
                                            <div id="theme-light" class="theme-option theme-light" title="Light Theme"></div>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">Accent Color</div>
                                        <div class="accent-selector">
                                            <div class="accent-option accent-purple active" data-accent="purple" title="Purple"></div>
                                            <div class="accent-option accent-blue" data-accent="blue" title="Blue"></div>
                                            <div class="accent-option accent-green" data-accent="green" title="Green"></div>
                                            <div class="accent-option accent-orange" data-accent="orange" title="Orange"></div>
                                            <div class="accent-option accent-red" data-accent="red" title="Red"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="settings-section">
                                    <h4>General Settings</h4>
                                    <div class="setting-item">
                                        <div class="setting-label">Start with Windows</div>
                                        <div class="setting-control">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="start-with-windows">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">Run as Administrator</div>
                                        <div class="setting-control">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="run-as-admin">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">Minimize to System Tray</div>
                                        <div class="setting-control">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="minimize-to-tray" checked>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="settings-section">
                                    <h4>Cleaning Options</h4>
                                    <div class="setting-item">
                                        <div class="setting-label">Create Backup Before Cleaning</div>
                                        <div class="setting-control">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="create-backup" checked>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">Show Confirmation Dialog</div>
                                        <div class="setting-control">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="show-confirmation" checked>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">Schedule Regular Cleaning</div>
                                        <div class="setting-control">
                                            <select id="schedule-cleaning" class="form-select">
                                                <option value="never">Never</option>
                                                <option value="daily">Daily</option>
                                                <option value="weekly">Weekly</option>
                                                <option value="monthly">Monthly</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="settings-section">
                                    <h4>About</h4>
                                    <div class="about-info">
                                        <p><strong>DEXTER PC Optimizer</strong> v2.0</p>
                                        <p>¬© 2025 DexterLee</p>
                                        <p>A powerful system optimization tool to clean and speed up your PC.</p>
                                    </div>
                                    <div class="setting-actions">
                                        <button id="save-settings-btn" class="btn btn-primary">Save Settings</button>
                                        <button id="check-updates-btn" class="btn btn-outline-primary">Check for Updates</button>
                                        <button id="reset-settings-btn" class="btn btn-outline-secondary">Reset Settings</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Cleaning Results -->
    <div class="modal fade" id="results-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Cleaning Results</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="results-summary">
                        <div class="result-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="result-stats">
                            <div class="stat-item">
                                <span class="stat-label">Files Cleaned:</span>
                                <span id="files-cleaned" class="stat-value">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Space Freed:</span>
                                <span id="space-freed" class="stat-value">0 MB</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Errors:</span>
                                <span id="error-count" class="stat-value">0</span>
                            </div>
                        </div>
                    </div>
                    <div id="error-details" class="error-details d-none">
                        <h6>Error Details:</h6>
                        <ul id="error-list"></ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Admin Confirmation -->
    <div class="modal fade" id="admin-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Administrator Privileges</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="admin-request-content">
                        <div class="admin-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <p>This application needs administrator privileges to perform deep cleaning operations.</p>
                        <p>Click "Run as Admin" to restart with elevated privileges.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" id="confirm-admin-btn" class="btn btn-primary">Run as Admin</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    
    <!-- Admin Restart Handler -->
    <script>
        // Check if this is an admin restart
        document.addEventListener('DOMContentLoaded', function() {
            // Check system status to see if this is an admin restart
            fetch('/api/system-status')
                .then(response => response.json())
                .then(data => {
                    if (data.success && data.data.is_admin_restart) {
                        // Show notification that we're now running as admin
                        const adminIcon = document.getElementById('admin-icon');
                        const adminStatusText = document.getElementById('admin-status-text');
                        
                        if (adminIcon && adminStatusText) {
                            adminIcon.className = 'fas fa-shield-alt admin-active';
                            adminStatusText.textContent = 'Admin privileges active';
                            adminStatusText.className = 'admin-active';
                            
                            // Hide the "Run as Admin" button since we're already admin
                            const adminBtn = document.getElementById('admin-btn');
                            if (adminBtn) {
                                adminBtn.style.display = 'none';
                            }
                            
                            // Show a toast notification
                            showToast('Admin privileges granted', 'Application is now running with administrator privileges.');
                        }
                    }
                })
                .catch(error => console.error('Error checking admin status:', error));
        });
        
        // Function to show toast notification
        function showToast(title, message) {
            // Create toast element
            const toastEl = document.createElement('div');
            toastEl.className = 'toast-notification';
            toastEl.innerHTML = `
                <div class="toast-header">
                    <i class="fas fa-shield-alt me-2"></i>
                    <strong>${title}</strong>
                    <button type="button" class="btn-close ms-auto"></button>
                </div>
                <div class="toast-body">${message}</div>
            `;
            
            // Add to document
            document.body.appendChild(toastEl);
            
            // Show toast
            setTimeout(() => {
                toastEl.classList.add('show');
                
                // Auto hide after 5 seconds
                setTimeout(() => {
                    toastEl.classList.remove('show');
                    setTimeout(() => {
                        document.body.removeChild(toastEl);
                    }, 300);
                }, 5000);
            }, 100);
            
            // Close button functionality
            const closeBtn = toastEl.querySelector('.btn-close');
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    toastEl.classList.remove('show');
                    setTimeout(() => {
                        document.body.removeChild(toastEl);
                    }, 300);
                });
            }
        }
    </script>
</body>
</html>